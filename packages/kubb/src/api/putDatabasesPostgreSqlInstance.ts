/**
* Generated by Kubb (https://kubb.dev/).
* Do not edit manually.
*/

import type { RequestConfig, ResponseErrorConfig } from "../.kubb/fetch.ts";
import type { PutDatabasesPostgreSqlInstanceMutationRequest, PutDatabasesPostgreSqlInstanceMutationResponse, PutDatabasesPostgreSqlInstancePathParams } from "../types/PutDatabasesPostgreSqlInstance.ts";
import { fetch } from "../.kubb/fetch.ts";

function getPutDatabasesPostgreSqlInstanceUrl(instanceId: PutDatabasesPostgreSqlInstancePathParams["instanceId"]) {
  const res = { method: 'PUT', url: `/databases/postgresql/instances/${instanceId}` as const }  
  return res
}

/**
 * @description Make changes to an existing PostgreSQL Managed Database.- The user needs `read_write` [user grant](https://techdocs.akamai.com/linode-api/reference/get-user-grants) access to the database.- The database's status needs to be `active`.- New values set in the `allow_list` overwrite existing values. To keep existing values, run the [List PostgreSQL Managed Databases](https://techdocs.akamai.com/linode-api/reference/get-databases-postgre-sql-instances) operation, store the `allow_list` addresses from the response, and include them with any new addresses in this operation.- Updates to your `allow_list` may take a short period of time to complete, making this operation inappropriate for rapid successive updates.- Also allows resizing the database cluster to a larger one. Clusters can't be resized to smaller plans.- All Managed Databases include automatic updates, which apply security patches to the underlying operating system of the Managed PostgreSQL Database. Use the `updates` object in this operation to modify the maintenance window for these updates.- If your database cluster is configured with a single node, downtime occurs during maintenance updates. Use the `updates` object to adjust the window to match a time that's the least disruptive to your application and users. Also consider upgrading to a [high availability](https://techdocs.akamai.com/cloud-computing/docs/aiven-database-clusters#high-availability) plan to avoid any maintenance downtime.- Major upgrades are optional until the service reaches end of service, and can be done in place.- You can't update `engine_config` advanced parameter settings for a suspended database. You'll need to [resume](https://techdocs.akamai.com/linode-api/reference/resume-databases-postgre-sql-instance) it first.- A successful request triggers a `database_update` [event](https://techdocs.akamai.com/linode-api/reference/get-events).- **Beta**. You can update an existing PostgreSQL Managed Database to move it to a Virtual Private Cloud (VPC) using the `private_network` object in the request. This support is in beta. Talk to your Akamai account team for more details.  > ðŸ“˜  >  > Currently, VPC subnets associated with Managed Database instances don't automatically block outbound connections outside the subnet. To limit network exposure, you should configure Cloud Firewall rules to explicitly deny outbound connections beyond the intended subnet. For more details on configuring rules, see the [Cloud Firewall](https://techdocs.akamai.com/cloud-computing/docs/cloud-firewall) documentation.<<LB>>---- __CLI__.    ```    linode-cli databases postgresql-update 123 \  --label example-db \  --allow_list 203.0.113.1 \  --allow_list 192.0.1.0/24 \  --type g6-standard-1 \  --updates.frequency weekly \  --updates.duration 3 \  --updates.hour_of_day 12 \  --updates.day_of_week 4 \    ```    [Learn more...](https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-the-linode-cli)- __OAuth scopes__.    ```    databases:read_write    ```    [Learn more...](https://techdocs.akamai.com/linode-api/reference/get-started#oauth)
 * @summary Update a PostgreSQL Managed Database
 * {@link /databases/postgresql/instances/:instanceId}
 */
export async function putDatabasesPostgreSqlInstance(instanceId: PutDatabasesPostgreSqlInstancePathParams["instanceId"], data?: PutDatabasesPostgreSqlInstanceMutationRequest, config: Partial<RequestConfig<PutDatabasesPostgreSqlInstanceMutationRequest>> & { client?: typeof fetch } = {}) {
  const { client: request = fetch, ...requestConfig } = config  
  
  const requestData = data  
  
  const res = await request<PutDatabasesPostgreSqlInstanceMutationResponse, ResponseErrorConfig<Error>, PutDatabasesPostgreSqlInstanceMutationRequest>({ method : "PUT", url : getPutDatabasesPostgreSqlInstanceUrl(instanceId).url.toString(), data : requestData, ... requestConfig })  
  return res.data
}