/**
* Generated by Kubb (https://kubb.dev/).
* Do not edit manually.
*/

import type { RequestConfig, ResponseErrorConfig } from "../.kubb/fetch.ts";
import type { PostRebuildNodeBalancerConfigMutationRequest, PostRebuildNodeBalancerConfigMutationResponse, PostRebuildNodeBalancerConfigPathParams } from "../types/PostRebuildNodeBalancerConfig.ts";
import { fetch } from "../.kubb/fetch.ts";

function getPostRebuildNodeBalancerConfigUrl(nodeBalancerId: PostRebuildNodeBalancerConfigPathParams["nodeBalancerId"], configId: PostRebuildNodeBalancerConfigPathParams["configId"]) {
  const res = { method: 'POST', url: `/nodebalancers/${nodeBalancerId}/configs/${configId}/rebuild` as const }  
  return res
}

/**
 * @description Rebuilds a NodeBalancer config and its nodes that you have permission to modify.Use this operation to update a NodeBalancer's config and nodes with a single request.> ðŸš§>> You can configure UDP on the same NodeBalancer that also uses TCP, HTTP, or HTTPS, but only when managing it through the API. If UDP is configured and you make changes to the TCP, HTTP or HTTPS settings in Cloud Manager, the existing UDP configuration will be overwritten. This is because Cloud Manager doesn't currently support UDP.<<LB>>---- __CLI: HTTPS__.    ```    linode-cli nodebalancers config-rebuild \  12345 4567 \  --port 443 \  --protocol https \  --algorithm roundrobin \  --stickiness http_cookie \  --check http_body \  --check_interval 90 \  --check_timeout 10 \  --check_attempts 3 \  --check_path "/test" \  --check_body "it works" \  --check_passive true \  --proxy_protocol "none" \  --ssl_cert "-----BEGIN CERTIFICATE-----              CERTIFICATE_INFORMATION              -----END CERTIFICATE-----" \  --ssl_key "-----BEGIN PRIVATE KEY-----             PRIVATE_KEY_INFORMATION             -----END PRIVATE KEY-----" \  --cipher_suite recommended \  --nodes.label "node1" --nodes.address "192.168.210.120:80" --nodes.mode "accept" --nodes.weight 50 \  --nodes '[{"address":"192.168.210.122:80","label":"node2","weight":50,"mode":"accept"}]' \  --nodes '[{"address":"10.0.0.45:80","label":"vpc-node","weight":10,"mode":"accept","subnet_id:1"}]'    ```    [Learn more...](https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-the-linode-cli)- __CLI: UDP__.    ```    linode-cli nodebalancers config-rebuild \   12345 4567 \   --port 80 \   --protocol udp \   --algorithm ring_hash \   --udp_check_port 80 \   --nodes.label "node1" --nodes.address "192.168.210.120:80" --nodes.mode "accept" --nodes.weight 50 \   --nodes '[{"address":"192.168.210.122:80","label":"node2","weight":50}]' \   --nodes '[{"address":"10.0.0.45:80","label":"vpc-node","weight":10,"mode":"accept","subnet_id:1"}]'    ```    [Learn more...](https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-the-linode-cli)- __CLI: TCP__.    ```    linode-cli nodebalancers config-rebuild \  12345 4567 \  --port 80 \  --protocol tcp \  --algorithm roundrobin \  --stickiness none \  --proxy_protocol "v2"  --nodes.label "node1" --nodes.address "192.168.210.120:80" --nodes.mode "accept" --nodes.weight 50 \  --nodes '[{"address":"192.168.210.122:80","label":"node2","weight":50,"mode":"accept"}]' \  --nodes '[{"address":"10.0.0.45:80","label":"vpc-node","weight":10,"mode":"accept","subnet_id:1"}]'    ```    [Learn more...](https://www.linode.com/docs/products/tools/cli/get-started/)- __CLI: HTTP__.    ```    linode-cli nodebalancers config-rebuild \  12345 4567 \  --port 440 \  --protocol http \  --algorithm roundrobin \  --stickiness none \  --check http_body \  --check_interval 90 \  --check_timeout 10 \  --check_attempts 3 \  --check_path "/test" \  --check_body "it works" \  --nodes.label "node1" --nodes.address "192.168.210.120:80" --nodes.mode "accept" --nodes.weight 50 \  --nodes '[{"address":"192.168.210.122:80","label":"node2","weight":50,"mode":"accept"}]' \  --nodes '[{"address":"10.0.0.45:80","label":"vpc-node","weight":10,"mode":"accept","subnet_id:1"}]'    ```    [Learn more...](https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-the-linode-cli)- __OAuth scopes__.    ```    nodebalancers:read_write    ```    [Learn more...](https://techdocs.akamai.com/linode-api/reference/get-started#oauth)
 * @summary Rebuild a config
 * {@link /nodebalancers/:nodeBalancerId/configs/:configId/rebuild}
 */
export async function postRebuildNodeBalancerConfig(nodeBalancerId: PostRebuildNodeBalancerConfigPathParams["nodeBalancerId"], configId: PostRebuildNodeBalancerConfigPathParams["configId"], data?: PostRebuildNodeBalancerConfigMutationRequest, config: Partial<RequestConfig<PostRebuildNodeBalancerConfigMutationRequest>> & { client?: typeof fetch } = {}) {
  const { client: request = fetch, ...requestConfig } = config  
  
  const requestData = data  
  
  const res = await request<PostRebuildNodeBalancerConfigMutationResponse, ResponseErrorConfig<Error>, PostRebuildNodeBalancerConfigMutationRequest>({ method : "POST", url : getPostRebuildNodeBalancerConfigUrl(nodeBalancerId, configId).url.toString(), data : requestData, ... requestConfig })  
  return res.data
}